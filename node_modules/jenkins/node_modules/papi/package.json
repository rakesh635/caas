{
  "name": "papi",
  "version": "0.25.1",
  "description": "Build HTTP API clients",
  "main": "lib",
  "devDependencies": {
    "async": "^2.0.0-rc.3",
    "bluebird": "^3.1.1",
    "debug": "^2.0.0",
    "istanbul": "^0.4.0",
    "jscs": "^3.0.3",
    "jshint": "^2.5.5",
    "lodash": "^4.11.2",
    "mocha": "^2.1.0",
    "nock": "^8.0.0",
    "request": "^2.44.0",
    "should": "^8.3.1",
    "sinon": "^1.10.3"
  },
  "scripts": {
    "cover": "istanbul cover _mocha -- --recursive && open coverage/lcov-report/index.html",
    "bench": "BENCHMARK=true mocha test/benchmark.js",
    "test": "jshint lib test && jscs lib test && istanbul cover _mocha -- --recursive --check-leaks --globals Promise && istanbul check-coverage --statements 100 --functions 100 --branches 100 --lines 100"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/silas/node-papi.git"
  },
  "keywords": [
    "api",
    "client",
    "http",
    "rest"
  ],
  "author": {
    "name": "Silas Sewell",
    "email": "silas@sewell.org"
  },
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/silas/node-papi/issues"
  },
  "homepage": "https://github.com/silas/node-papi",
  "readme": "# Papi [![Build Status](https://travis-ci.org/silas/node-papi.png?branch=master)](https://travis-ci.org/silas/node-papi)\n\nThis is a module for building HTTP API clients.\n\n * [Documentation](#documentation)\n * [Example](#example)\n * [License](#license)\n\n## Documentation\n\n * [Client](#client)\n * [Shortcuts](#shortcuts)\n\n<a name=\"client\"></a>\n### papi.Client([options])\n\nInitialize a new client.\n\nYour client should inherit the prototype methods from this constructor and call\nit in your client's constructor.\n\nOptions\n\n * baseUrl (String): base URL, should not include trailing slash\n * headers (Object&lt;String, String&gt;, optional): defaults headers to include in every request\n * type (String, optional, supports: form, json, text): default request body encoding type\n * encoders (Object&lt;String, Function&gt;, optional): an object that maps a mime type to a function. The function should accept an object and return a Buffer.\n * decoders (Object&lt;String, Function&gt;, optional): an object that maps a mime type to a function. The function should accept a Buffer or String (must support both) and return an object.\n * tags (String[], optional): tags included in `_log` calls\n * timeout (Number, optional): default number of milliseconds before request is aborted\n\nUsage\n\n``` javascript\nvar papi = require('papi');\nvar util = require('util');\n\nfunction GitHub(opts) {\n  opts = opts || {};\n  opts.baseUrl = 'https://api.github.com';\n  opts.header = { accept: 'application/vnd.github.v3+json' };\n  opts.timeout = 15 * 1000;\n\n  papi.Client.call(this, opts);\n}\n\nutil.inherits(GitHub, papi.Client);\n```\n\n<a name=\"client-request\"></a>\n### client.\\_request(request, [callback...], callback)\n\nMake an HTTP request.\n\nYour client should use this or the shortcut methods listed below to execute\nHTTP requests in your client methods.\n\nArguments\n\n * request (Object): request options\n * callback... (Function&lt;request, next&gt;, optional): middleware functions that can mutate `request.err` or `request.res`. Call `next` without arguments to continue execution, `next(err)` to break with an error, or `next(false, arguments...)` to trigger the final callback with the given arguments.\n * callback (Function&lt;err, res&gt;): request callback function.\n\nRequest\n\n * path (String): request path, can include variable segments defined by curly braces (ex: `/user/{id}`)\n * method (String): request method\n * headers (Object&lt;String, String&gt;, optional): request headers\n * params (Object&lt;String, String&gt;, optional): sets variables in request path\n * query (Object&lt;String, String|String[]&gt;, optional): query parameters\n * body (Object|Buffer|Readable, optional): request body\n * type (String, optional, supports: form, json, text): request body encoding type\n * ctx (EventEmitter, optional): emit `cancel` to abort request\n * timeout (Number, optional): number of milliseconds before request is aborted\n * tags (String[], optional): tags included in `_log` calls\n\nThere are also `_get`, `_head`, `_post`, `_put`, `_delete` (`_del`), `_patch`,\nand `_options` shortcuts with the same method signature as `_request`.\n\nUsage\n\n``` javascript\nGitHub.prototype.gists = function(username, callback) {\n  var opts = {\n    path: '/users/{username}/gists',\n    params: { username: username },\n  };\n\n  this._get(opts, function(err, res) {\n    if (err) return callback(err);\n\n    callback(null, res.body);\n  });\n};\n```\n\nResult\n\n```\nstatusCode 200\nbody [ { url: 'https://api.github.com/gists/9458207',\n...\n```\n\n### client.\\_log(tags, [data])\n\nEmit log events.\n\nArguments\n\n * tags (String[]): tags associated with event\n * data (optional): remaining arguments\n\nUsage\n\n``` javascript\nclient.on('log', function(tags) {\n  console.log({\n    tags: tags,\n    data: Array.prototype.slice.call(arguments, 1),\n  });\n});;\n\nclient._log(['github', 'gist'], 'silas');\n```\n\nResult\n\n```\n{ data: [ 'silas' ], tags: [ 'debug', 'github', 'gist' ] }\n```\n\n### client.\\_ext(event, callback)\n\nRegister an extension function.\n\nArguments\n\n * event (String): event name\n * callback (Function): function to execute at a specified point during the request\n\nUsage\n\n``` javascript\nclient._ext('onRequest', function(request, next) {\n  console.log('request', request.opts.method + ' ' + request.opts.path);\n\n  request.start = new Date();\n\n  next();\n});\n\nclient._ext('onResponse', function(request, next) {\n  var duration = new Date() - request.start;\n  var statusCode = request.res ? request.res.statusCode : 'none';\n\n  console.log('response', request.opts.method, request.opts.path, statusCode, duration + 'ms');\n\n  next();\n});\n```\n\nResult\n\n```\nrequest GET /users/{username}/gists\nresponse GET /users/{username}/gists 200 1141ms\n```\n\n### client.\\_plugin(plugin, options)\n\nRegister a plugin.\n\nArguments\n\n * plugin (Object): plugin module\n * options (Object, optional): plugin options\n\nUsage\n\n``` javascript\nclient._plugin(require('papi-retry'));\n```\n\n<a name=\"shortcuts\"></a>\n### papi.request(request, [callback...], callback)\n\nShortcuts for making one-off requests.\n\nSee [client request](#client-request) for full options list, with the exception\nthat `path` is replaced with `url`.\n\nRequest\n\n * url (String): request url (ex: `http://example.org/`)\n\nThere are also `get`, `head`, `post`, `put`, `delete` (`del`), `patch`, and\n`options` shortcuts with the same method signature as `request`.\n\nUsage\n\n``` javascript\nvar papi = require('papi');\n\npapi.get('https://api.github.com/users/silas/gists', function(err, res) {\n  if (err) throw err;\n\n  res.body.forEach(function(gist) {\n    console.log(gist.url);\n  });\n});\n```\n\n\n## Example\n\n``` javascript\n/**\n * Module dependencies.\n */\n\nvar papi = require('papi');\nvar util = require('util');\n\n/**\n * GitHub API client\n */\n\nfunction GitHub(opts) {\n  opts = opts || {};\n\n  if (!opts.baseUrl) {\n    opts.baseUrl = 'https://api.github.com';\n  }\n  if (!opts.headers) {\n    opts.headers = {};\n  }\n  if (!opts.headers.accept) {\n    opts.headers.accept = 'application/vnd.github.v3+json';\n  }\n  if (!opts.headers['user-agent']) {\n    opts.headers['user-agent'] = 'PapiGitHub/0.1.0';\n  }\n  if (opts.tags) {\n    opts.tags = ['github'].concat(opts.tags);\n  } else {\n    opts.tags = ['github'];\n  }\n  if (!opts.timeout) {\n    opts.timeout = 60 * 1000;\n  }\n\n  papi.Client.call(this, opts);\n\n  if (opts.debug) {\n    this.on('log', console.log);\n  }\n}\n\nutil.inherits(GitHub, papi.Client);\n\n/**\n * Get user gists\n */\n\nGitHub.prototype.gists = function(username, callback) {\n  var opts = {\n    path: '/users/{username}/gists',\n    params: { username: username },\n  };\n\n  return this._get(opts, callback);\n};\n\n/**\n * Print gists for user `silas`\n */\n\nfunction main() {\n  var github = new GitHub({ debug: true });\n\n  github.gists('silas', function(err, res) {\n    if (err) throw err;\n\n    console.log('----');\n\n    res.body.forEach(function(gist) {\n      if (gist.description) console.log(gist.description);\n    });\n  });\n}\n\n/**\n * Initialize\n */\n\nif (require.main === module) {\n  main();\n} else {\n  module.exports = GitHub;\n}\n```\n\n## License\n\nThis work is licensed under the MIT License (see the LICENSE file).\n",
  "readmeFilename": "README.md",
  "_id": "papi@0.25.1",
  "_shasum": "a54c022b1780f9240fae6aa1e861b21c9f8f12d9",
  "_from": "papi@^0.25.0",
  "_resolved": "https://registry.npmjs.org/papi/-/papi-0.25.1.tgz"
}
